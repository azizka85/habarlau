import{a as v,b as c,f as g}from"../../chunk-X4UVQ76S.js";import{a as f,b as I,c as y}from"../../chunk-DURSSFQP.js";import{b as p,c as d,d as u}from"../../chunk-VTHP63GR.js";import{b as l,d as E,e as L}from"../../chunk-H5F775QU.js";import{c as m}from"../../chunk-WSRL3A7G.js";var s=class extends v{node=null;appBarElem=null;drawerElem=null;navIcon=null;searchIcon=null;headerIconElem=null;headerIconBtn=null;signInUpElem=null;list=null;langList=null;langElem=null;langImageElem=null;searchPanel=null;searchForm=null;searchInput=null;static get instance(){return s.layout||(s.layout=new s),s.layout}get elem(){return this.node}async init(n,a){let h=n||document.body;if(this.node=h.querySelector('[data-layout="main-layout"]')||null,this.node){this.appBarElem=this.node.querySelector(".app-bar"),this.drawerElem=this.node.querySelector(".drawer"),this.navIcon=this.appBarElem?.querySelector('[data-button="navigation"]')||null,this.navIcon?.addEventListener("click",e=>l(e,this.navIcon)),this.searchIcon=this.appBarElem?.querySelector('[data-button="search"]')||null,this.searchIcon?.addEventListener("click",e=>l(e,this.searchIcon)),this.headerIconBtn=this.drawerElem?.querySelector('[data-button="header-navigation"]')||null,this.headerIconBtn&&(this.headerIconElem=this.headerIconBtn.querySelector('[data-icon="header-navigation-icon"]'),this.headerIconBtn.addEventListener("click",e=>l(e,this.headerIconBtn)));let i=this.drawerElem?.querySelector(".drawer-account-bar");i?.addEventListener("mouseenter",()=>this.drawerElem?.classList.add("drawer-hover")),this.signInUpElem=i?.querySelector('[data-content="sign-in-up"]')||null,this.signInUpElem?.addEventListener("click",e=>l(e,this.signInUpElem));let t=this.drawerElem?.querySelector(".drawer-lang-bar");t?.addEventListener("mouseenter",()=>this.drawerElem?.classList.add("drawer-hover"));let o=t?.querySelector('input[type="checkbox"]');if(this.langElem=t?.querySelector('[data-content="lang"]')||null,this.langImageElem=t?.querySelector('[data-image="lang"]')||null,this.langList=t?.querySelector('[data-list="lang"]')||null,this.langList)for(let e of this.langList.children)e.addEventListener("click",b=>{l(b,e),o&&(o.checked=!1)});if(this.list=this.drawerElem?.querySelector('[data-list="main"]')||null,this.list){for(let e of this.list.children)e.addEventListener("mouseenter",()=>this.drawerElem?.classList.add("drawer-hover"));this.drawerElem?.addEventListener("mouseleave",()=>this.drawerElem?.classList.remove("drawer-hover"))}this.searchPanel=this.appBarElem?.querySelector(".search")||null,this.searchForm=this.searchPanel?.querySelector("form")||null,this.searchInput=this.searchForm?.querySelector(".search-input"),this.searchInput?.addEventListener("focus",()=>{this.searchPanel?.classList.add("search-focus")}),this.searchForm?.querySelector(".search-icon-right")?.addEventListener("click",()=>{this.searchInput&&(this.searchInput.value="",this.searchInput.focus())}),this.searchForm?.querySelector(".search-icon-left")?.addEventListener("click",()=>{this.searchPanel?.classList.remove("search-focus"),this.searchInput?.blur()}),this.searchForm?.addEventListener("submit",e=>{e.preventDefault(),console.log("Form submited:",this.searchInput?.value),this.searchPanel?.classList.remove("search-focus"),this.searchInput?.blur()});let r=0;window.addEventListener("scroll",()=>{let e=window.scrollY||0;Math.abs(e-r)>p&&(r>=e?this.appBarElem?.classList.remove("app-bar-hide"):this.appBarElem?.classList.add("app-bar-hide")),e<=0?this.appBarElem?.classList.remove("app-bar-scrolled"):this.appBarElem?.classList.add("app-bar-scrolled"),this.node?.dispatchEvent(new CustomEvent(y,{detail:{currScroll:e,prevScroll:r}})),r=e})}return h}async mount(){await E(this.node)}async unmount(){await L(this.node)}async load(n,a,h){let i=a.query["main-layout-navigation"];if(this.navIcon){let t=`?${c(a.query,"main-layout-navigation")}`;this.navIcon.setAttribute("href",t)}if(this.headerIconBtn){let t=`?${c(a.query,"main-layout-navigation")}`;this.headerIconBtn.setAttribute("href",t)}if(this.searchIcon){let t=`?${c(a.query,"main-layout-search")}`;this.searchIcon.setAttribute("href",t)}if(i?(this.headerIconElem?.classList.remove("drawer-header-icon-hide"),this.drawerElem?.classList.add("drawer-open")):(this.headerIconElem?.classList.add("drawer-header-icon-hide"),this.drawerElem?.classList.remove("drawer-open")),this.signInUpElem&&(this.signInUpElem.textContent=window.tr("Sign In/Up"),this.signInUpElem.setAttribute("href",(n===u?"":`/${n}`)+"/sign-in")),this.langElem&&(this.langElem.textContent=d[n]?.label),this.langImageElem&&(this.langImageElem.src=d[n]?.image),this.langList)for(let t of this.langList.children){t.getAttribute("data-list-item")===`lang-${n}`?t.classList.add("list-item-activated"):t.classList.remove("list-item-activated");let o=t.getAttribute("data-list-item")?.split("-")[1]||u,r=g(location.pathname,o);t.setAttribute("href",`/${r+location.search}`)}}listen(n,a){this.node?.addEventListener(n,a)}performAction(n,a){switch(n){case f:window.scrollTo({top:0,behavior:"smooth"});break;case I:window.scrollTo({top:a?.top,behavior:a?.noSmooth?"auto":"smooth"});break}}},w=s;m(w,"layout",null);export{w as MainLayout};
