import{b as u,c as E,d as c}from"../../chunk-PM37KJF3.js";import{a as v,b as L,c as y}from"../../chunk-DURSSFQP.js";import{c as d,e as i,g as m,h as p}from"../../chunk-33W33KZV.js";var n=class extends E{node=null;appBarElem=null;drawerElem=null;navIcon=null;searchIcon=null;headerIcon=null;headerIconBtn=null;list=null;searchForm=null;static get instance(){return n.layout||(n.layout=new n),n.layout}get elem(){return this.node}async init(t,a){let o=t||document.body;if(this.node=o.querySelector('[data-layout="main-layout"]')||null,this.node){if(this.appBarElem=this.node.querySelector(".app-bar"),this.drawerElem=this.node.querySelector(".drawer"),this.navIcon=this.appBarElem?.querySelector('[data-button="navigation"]')||null,this.navIcon?.addEventListener("click",e=>i(e,this.navIcon)),this.searchIcon=this.appBarElem?.querySelector('[data-button="search"]')||null,this.searchIcon?.addEventListener("click",e=>i(e,this.searchIcon)),this.headerIconBtn=this.drawerElem?.querySelector('[data-button="header-navigation"]')||null,this.headerIconBtn&&(this.headerIcon=this.headerIconBtn.querySelector('[data-icon="header-navigation-icon"]'),this.headerIconBtn.addEventListener("click",e=>i(e,this.headerIconBtn))),this.list=this.drawerElem?.querySelector(".list")||null,this.list){for(let e of this.list.children)e.addEventListener("mouseenter",()=>this.drawerElem?.classList.add("drawer-hover"));this.drawerElem?.addEventListener("mouseleave",()=>this.drawerElem?.classList.remove("drawer-hover"))}let r=this.appBarElem?.querySelector(".search");this.searchForm=r?.querySelector("form")||null;let s=this.searchForm?.querySelector(".search-input");s?.addEventListener("focus",()=>{r?.classList.add("search-focus")}),this.searchForm?.querySelector(".search-icon-right")?.addEventListener("click",()=>{s&&(s.value="",s.focus())}),this.searchForm?.querySelector(".search-icon-left")?.addEventListener("click",()=>{r?.classList.remove("search-focus")}),this.searchForm?.addEventListener("submit",e=>{e.preventDefault();let w=new FormData(this.searchForm);console.log("Form submited: ");for(let h of w.entries())console.log(h[0]+":",h[1])});let l=0;window.addEventListener("scroll",()=>{let e=window.scrollY||0;Math.abs(e-l)>u&&(l>=e?this.appBarElem?.classList.remove("app-bar-hide"):this.appBarElem?.classList.add("app-bar-hide")),e<=0?this.appBarElem?.classList.remove("app-bar-scrolled"):this.appBarElem?.classList.add("app-bar-scrolled"),this.node?.dispatchEvent(new CustomEvent(y,{detail:{currScroll:e,prevScroll:l}})),l=e})}return o}async mount(){await m(this.node)}async unmount(){await p(this.node)}async load(t,a){let o=t.query["main-layout-navigation"];if(this.navIcon){let r=`?${c(t.query,"main-layout-navigation")}`;this.navIcon.setAttribute("href",r)}if(this.headerIconBtn){let r=`?${c(t.query,"main-layout-navigation")}`;this.headerIconBtn.setAttribute("href",r)}if(this.searchIcon){let r=`?${c(t.query,"main-layout-search")}`;this.searchIcon.setAttribute("href",r)}o?(this.headerIcon?.classList.remove("drawer-header-icon-hide"),this.drawerElem?.classList.add("drawer-open")):(this.headerIcon?.classList.add("drawer-header-icon-hide"),this.drawerElem?.classList.remove("drawer-open"))}listen(t,a){this.node?.addEventListener(t,a)}doAction(t,a){switch(t){case v:window.scrollTo({top:0,behavior:"smooth"});break;case L:window.scrollTo({top:a?.top,behavior:a?.noSmooth?"auto":"smooth"});break}}},f=n;d(f,"layout",null);export{f as MainLayout};
